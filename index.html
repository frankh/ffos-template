<!DOCTYPE html>
<html>
	<head>
		<script src="js/lib/jquery-1.7.2.js"></script>
		<script>
			$(document).ready(function() {
				$('#install').click(function() {
					request = window.navigator.mozApps.install('http://frankh.github.com/ffos-template/manifest.webapp');
					request.onsuccess = function () {
						// Save the App object that is returned
						var appRecord = this.result;
						alert('Installation successful!');
					};
					request.onerror = function () {
						// Display the error information from the DOMError object
						alert('Install failed, error: ' + this.error.name);
					};
				});

				$('#set-alarm').click(function() {
					var date = new Date();
					date.setSeconds(date.getSeconds() + 10);

					var request = navigator.mozAlarms.add(date, "honorTimezone", {foo:"bar"});
					request.onsuccess = function(e) { alert(e) };
					request.onerror = function(e) { alert(e.target.error.name) };
					
					navigator.mozSetMessageHandler("alarm", function (message) {
						alert("alarm fired: " + JSON.stringify(message)); 
					});
				});

			})
		</script>
	</head>
	<body>
		<h1>Hello, World!</h1>
		<button id='install'>Install</button>
		<button id='set-alarm'>Alarm</button>
	</body>
</html>